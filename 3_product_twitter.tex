%%%%%%%%%%%% ------------ chapter header ------------  %%%%%%%%%%%%
\chapterhead
% chapter title
{位置情報付きツイート解析による\\
経路・イベント検出と可視化}
% chapter abstraction
{本章では位置情報付きツイートに着目し，イベント参加者と予測される人の移動経路の Web アプリケーションによる可視化手法について述べる．}

%%%%%%%%%%%% ------------ next page ------------  %%%%%%%%%%%%

\section{システム概要}
本研究では、位置情報付きツイートに着目しイベント参加者と思われる人の移動経路の可視化とアプリケーションの作成を行った．
また、ツイート内容と位置情報からクラスタリングしイベントの検出と可視化を目的とし作成したWebアプリケーションについて述べる．

\subsection{移動経路可視化}
研究のサンプルとして2014年10月18日に行われたふじさわ江の島花火大会\cite{webpage_fujisawa}からツイートを収集し移動経路の可視化を行った\figref{hanabi_web}
イベント参加者と思われるユーザとして花火大会当日に半径10km以内でツイートしたユーザ及び「花火」，「ふじさわ」，主要駅名でのツイートを行ったユーザで絞り込んでデータを収集した．

\myfig{hanabi.png}{アプリケーション画面}{hanabi_web}

\subsection{イベント検出}
研究のサンプルはシステムを開発した周辺の2015年5月9日から5月12日の間のツイートを収集した．
ツイートのキーワードと緯度，経度をパラメータにクラスタリングを行いクラスタ毎に色分けをしマップ上に可視化をした．
またクラスタリング結果のマップ閲覧と管理が行えるWebアプリケーションの作成した\figref{event_all}

\myfig{event_all.png}{イベント検出アプリケーション画面}{event_all}


%%%%%%%%%%%% ------------ next page ------------  %%%%%%%%%%%%
\newpage

\section{システム構成}
\subsection{Twitter APIについて}
\subsubsection{Twitter APIについて}
本研究のツイート収集には Twitter API を用いた．主に \url{https://api.twitter.com/1.1/search/tweets.json} と \url{https://stream.twitter.com/1.1/statuses/filter.json} を使用しツイートの収集を行った．search/tweets API はツイートのフィルタリングとしてキーワード指定での過去のツイートの検索や緯度経度と半径で指定した範囲の過去のツイートの取得が可能である．また，search/tweets による過去のツイートは1週間前までの制限がある．

\subsection{移動経路可視化}
以下\figref{hanabi_sequence}の手順で解析を行う．
\myfighalf{hanabi_tweet_sequence.png}{花火ツイート解析の流れ}{hanabi_sequence}

\subsubsection{サンプルの取得}
ふじさわ江の島花火大会の花火打ち上げ地点から周囲10km圏内に絞って取得した．花火打ち上げ地点は緯度35.307061，経度139.478704 とした．さらに取得したツイートのユーザについて当日前後の17日から19日までのツイートを取得した\tabref{tweet_count}．

\mytable{花火-サンプルツイート数}{tweet_count}{
    \begin{tabular}{|l|r|} \hline
        日付 & サンプルツイート数 \\ \hline \hline
        10月17日 & 5052 \\
        10月18日 & 26723 \\
        10月19日 & 20227 \\ \hline
    \end{tabular}
}

\subsubsection{可視化Webアプリケーション}
可視化には Google Maps API \cite{webpage_googlemapapi} を使用した．
各ツイート地点にマーカーの表示を行い，同一のユーザはポリラインを使い前後のツイートと線で結んで表示し，直線であるが経路の可視化を試みた．
マーカーの色は時間に伴って明度を変えて，朝から夜にかけて明るい赤から暗い赤で表示をした\figref{markers}．

\myfigthirdset{marker1.png}{marker2.png}{marker3.png}{左から順に朝，昼，夜の時間帯のマーカー}{markers}

\subsection{イベント検出}
\figref{event_sequence}の手順で解析を行う．
\myfighalf{event_tweet_sequence.png}{イベント検出と可視化の流れ}{event_sequence}

\subsubsection{ツイート収集}
ツイートは移動経路の可視化と同様に取得した．今回は東京都内のツイートをサンプルとした．東京都心の緯度を35.673343，経度を139.710388から100km圏内，収集日時はは5月9日〜5月12日の4日間とした．

\subsubsection{クラスタリング}
キーワード・緯度経度を軸にK-meansを用いてクラスタリングを行った．
結果，各日付について\tabref{event_clusters}のクラスタ数に分類ができた．
また，時間帯を含めて K-means を試みた結果望ましい結果は得られなかったので手法の検討が必要である．

\mytable{イベント検出 - クラスタ数}{event_clusters}{
    \begin{tabular}{|l|r|} \hline
        日付 & クラスタ数 \\ \hline \hline
        5月09日 & 10 \\
        5月10日 & 12 \\
        5月11日 & 7 \\
        5月12日 & 7 \\ \hline
    \end{tabular}
}

\subsubsection{可視化Webアプリケーション}
経路可視化と同様にGoogleMapを使用した． クラスタ毎にマーカーの色を変更している．
可視化の結果10日の結果で良い結果が得られたので取り上げる\figref{event_day10}．10日のクラスタは以下の様な一覧\tabref{event_day10_clusters}になった．

\myfig{event_day10.png}{5月10日のプロット結果}{event_day10}

\mytable{イベント検出 - 5月10日}{event_day10_clusters}{
    \begin{tabular}{|l|r|} \hline
        キーワード & ツイート数 \\ \hline \hline
        imacoconow & 264 \\
        kawaguchi & 76 \\
        神田祭 & 65 \\
        photo & 43 \\
        横浜 & 41 \\
        週末限定 & 38 \\
        神田明神 & 35 \\
        東京 & 30 \\
        天気 & 28 \\ \hline
    \end{tabular}
}

\subsubsection{可視化によって発見できたイベント}
5月10日には実験前から把握していたイベントの神田祭の神輿宮入が終日行われていた\cite{webpage_kanda}．
実際にイベント周辺でのツイートを検出する事ができた\figref{event_desc_kanda}．
また，同日に事前に走らなかった「野外音楽フェスティバル 人間交差点 2015 \cite{webpage_nkfes}」というイベントも行われており，こちらもイベント周辺でのツイートとして検出することが出来たと言える\figref{event_desc_nkfes}．

\myfigtwo{event_desc_kanda.png}{神田祭ツイートのプロット}{event_desc_kanda}
{event_desc_nkfes.png}{nkfesツイートのプロット}{event_desc_nkfes}

\subsection{Geo Tweet収集クライアント}
今回の研究でTweetを収集するためにツールとして位置情報付きのツイートを API を使用して一括で収集するWebアプリケーションを作成した\figref{controller_app}．
最近のツイートを取得する用途で，今後の研究で活用が期待される．
\myfig{collector_app.png}{Tweet 収集アプリケーションUI}{controller_app}


%%%%%%%%%%%% ------------ next page ------------  %%%%%%%%%%%%
\newpage

\section{本章のまとめ}
% 限界
結果として，可視化から主要に使用されている駅の推測などはできるが，収集で得られた情報だけでは各ユーザの参加までの移動元や人の流れは大まかにしか予測できなかった．

% 解明点
関連研究として，位置情報をもたないツイートへの情報付加手法が提案されており\cite{twitterlocalevent}，活用することで情報の増加とユーザに対する分析が望める．

% 意義

% 展望
現在はユーザの属性づけができていないため，今後は付加情報とその可視化で意義を見出せないか試みたい．
時間軸を含めたクラスタリングもイベントの検出精度に関わると考えられる．アニメーションを用いたビジュアライズも表現方法の可能性が広がると思われる．


\newpage
